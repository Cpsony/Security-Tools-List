http://www.pentest-standard.org/index.php/Pre-engagement

内容
1 概述
2 范围简介
3 时间估计指标
4 范围界定会议
5 基于小时费率的额外支持
6份 调查问卷
7个 一般问题
7.1 网络渗透测试
7.2 Web应用程序渗透测试
7.3 无线网络渗透测试
7.4 物理渗透测试
7.5 社会工程
7.6 业务部门经理的问题
7.7 系统管理员的问题
8 范围蠕变
9 指定开始日期和结束日期
10 指定IP范围和域
10.1 验证范围
11 与第三方打交道
11.1 云服务
11.2 ISP
11.3 MSSP
11.4 服务器所在的国家/地区
12 定义可接受的社会工程借口
13 DoS测试
14 付款条款
14.1 净30
14.2 提前一半
14.3 重复
15个 目标
15.1 主要
15.2 次要
15.3 业务分析
16 建立沟通渠道
17 紧急联系信息
17.1 事件报告流程
17.2 事件定义
17.3 状态报告频率
17.4 PGP和其他替代方案
18 订立规则
18.1 时间表
18.2 地点
18.3 证据处理
18.4 定期会议
18.5 一天的测试时间
18.6 处理回避
18.7 测试许可
18.8 法律考虑因素
19个 能力和技术到位
概观
PTES这一部分的目的是介绍和解释可用的工具和技术，这些工具和技术有助于渗透测试的成功预接合步骤。本节中的信息是世界上一些最成功的渗透测试人员多年合并经验的结果。

如果您是寻求渗透测试的客户，我们强烈建议您阅读本文档的“一般问题”部分。它涵盖了在测试开始之前应该回答的主要问题。请记住，渗透测试不应该是对抗性的。它不应该是一个活动，看看测试人员是否可以“破解”你。它应该是识别与之相关的业务风险和攻击。

要获得最大价值，请确保涵盖本文档中的问题。此外，随着范围界定活动的进展，一个优秀的测试公司将开始提出为您的组织量身定制的其他问题。

范围简介
定义范围可以说是渗透测试中最重要的组成部分之一，但它也是最容易被忽视的组成部分之一。虽然已经编写了许多关于可用于访问网络的不同工具和技术的书，但在渗透之前的主题上写的却很少：准备。忽视正确完成预先参与活动有可能使渗透测试员（或他的公司）面临一些令人头痛的问题，包括范围蔓延，不满意的客户，甚至是法律问题。项目的范围专门定义了要测试的内容。如何进行测试的各个方面将在“交战规则”部分中介绍。

确定参与范围的一个关键组成部分是概述测试人员应该如何花时间。例如，客户要求以100,000美元的价格测试100个IP地址。这意味着客户每个测试的IP地址提供1,000美元。但是，这种成本结构仅在该数量上仍然有效。一些测试人员常见的陷阱是在整个测试过程中保持线性成本。如果客户只要求以相同的定价结构（1,000美元）测试一个业务关键型应用程序，而测试人员仍然只攻击单个IP，则工作量会急剧增加。根据完成的工作改变成本很重要。否则，公司很容易发现自己的服务收费不足，这促使他们做一份不完整的工作。

尽管拥有稳固的定价结构，但这个过程并非全是黑白分明。客户完全不知道他们需要测试的是什么并不罕见。客户端也可能不知道如何有效地沟通他们对测试的期望。在预参与阶段，测试人员能够作为指导客户的未知领域，这一点非常重要。测试人员必须了解专注于具有严重强度的单个应用程序的测试与客户端提供广泛的IP地址以进行测试的测试之间的区别，目标是简单地找到方法。

时间估计的度量标准
时间估计与某个区域的测试人员的经验直接相关。如果测试人员在某项测试中具有丰富的经验，他可能天生就能确定测试需要多长时间。如果测试人员在该领域的经验较少，重新阅读电子邮件和扫描以前类似测试的日志，公司已经做了很好的方法来估计当前参与的时间要求。一旦确定测试时间，添加20％的时间是谨慎的做法。

时间值后端的额外20％称为填充。在顾问圈之外，这也被称为顾问开销。填充是任何测试的绝对必要条件。如果测试中发生任何中断，它会提供缓冲。通常会发生许多事件并阻碍测试过程。例如，网络段可能会出现故障，或者可能发现一个重要的漏洞，需要与许多级别的管理层进行多次会议才能解决。这两个事件都很耗时，并且如果填充不到位，则会显着影响原始时间估计。

如果20％的填充最终没有必要会发生什么？向客户收取未使用时间的费用将是非常不道德的，因此测试人员需要提供额外的价值，如果达到参与时间限制，通常不会提供这些价值。示例包括让公司安全团队走过利用漏洞的步骤，如果它不是原始可交付成果列表的一部分，则提供执行摘要，或者花一些时间尝试破解初始测试期间难以捉摸的漏洞。

时间和测试指标的另一个组成部分是每个项目都需要有明确的下降死亡日期。所有好的项目都有明确的开端和结束。如果您已达到测试结束的具体日期，或者在该日期之后要求您进行任何其他测试或工作，则需要签署一份工作声明，说明工作和所需的工作时间。一些测试人员很难做到这一点，因为他们觉得在成本和工作时间方面他们太痛苦了。然而，作者的经验是，如果您为主要测试提供卓越的价值，客户将不会拒绝为您支付额外的工作费用。

范围会议
在许多情况下，范围会议将在合同签订后进行。确实会发生这样的情况，其中许多与范围相关的主题可以在合同签署之前进行讨论，但它们很少而且很少。对于这些情况，建议在进行任何深入的范围界定讨论之前签署保密协议。

范围界定会议的目标是讨论将要测试的内容。本次会议不涉及参与规则和费用。这些主题中的每一个都应该在会议中处理，每个会议都是会议的焦点。这样做是因为如果没有明确说明焦点，讨论很容易混淆和混乱。充当主持人并保持讨论主题，防止切线并在必要时宣布更适合离线讨论的某些主题非常重要。

现在已经为项目建立了粗略的数量级（ROM）值，现在是时候与客户会面以验证假设。首先，需要明确确定IP范围的参与范围。客户端抵抗并且认为测试人员识别他们的网络并对其进行攻击是特权，以使测试尽可能真实，这种情况并不少见。这确实是一种理想的情况，但是，必须首先考虑可能的法律后果。因此，测试人员有责任向客户传达这些关注点，并向他们传授隐含范围的重要性。例如，在会议中，应验证客户拥有所有目标环境，包括：DNS服务器，电子邮件服务器，他们的Web服务器运行的实际硬件及其防火墙/ IDS / IPS解决方案。有许多公司将这些设备的管理外包给第三方。

此外，必须确定目标环境在其中运行的国家，省和州。法律因地区而异，测试很可能会受到这些法律的影响。例如，众所周知，属于欧盟的国家有关于个人隐私的非常严格的法律，这可以显着改变社会工程参与的执行方式。

基于小时费率的额外支持
任何未在参与范围内明确涵盖的内容都应该非常谨慎地处理。第一个原因是范围蔓延。随着范围的扩大，资源被消耗，削减了测试人员的利润，甚至可能造成客户的困惑和愤怒。还有一个问题是许多测试人员在临时承担额外工作时没有想到的：法律后果。许多临时请求没有正确记录，因此很难确定在发生争议或法律诉讼时谁说了什么。此外，合同是一份法律文件，规定了要完成的工作。它应该与测试备忘录的权限紧密相关。

原始范围之外的任何请求都应以工作说明的形式记录，以明确指出要完成的工作。我们还建议合同中明确规定，每小时收取固定费用的额外工作，并明确规定在签署和反签署的SOW到位之前无法完成额外的工作。

问卷调查
在与客户的初始通信期间，客户必须回答几个问题，以便可以正确地估计参与范围。这些问题旨在更好地了解客户希望从渗透测试中获得什么，为什么客户希望针对其环境执行渗透测试，以及他们是否希望在执行期间执行某些类型的测试渗透测试。以下是在此阶段可能会问的示例问题。

一般的问题
网络渗透测试
为什么客户对其环境进行了渗透测试？
特定合规要求是否需要渗透测试？
客户何时需要进行渗透测试的活动部分（扫描，枚举，开发等）？
营业时间？
营业时间之后？
在周末？
正在测试的IP地址总数是多少？
如果适用，有多少内部IP地址？
如果适用，有多少外部IP地址？
是否存在可能影响渗透测试结果的设备，如防火墙，入侵检测/防御系统，Web应用程序防火墙或负载均衡器？
在系统被渗透的情况下，测试团队应该如何进行？
在受感染的计算机上执行本地漏洞评估？
尝试在受感染的计算机上获得最高权限（在Unix计算机上为root，在Windows计算机上为SYSTEM）
对获得的本地密码哈希执行no，minimal，dictionary或详尽的密码攻击（例如，Unix机器上的/ etc / shadow）？
Web应用程序渗透测试
有多少Web应用程序正在评估中？
有多少登录系统正在评估中？
正在评估多少个静态页面？（近似）
正在评估多少个动态页面？（近似）
源代码是否可以随时使用？
会有任何文件吗？
如果是，那是什么样的文件？
是否会对此应用程序执行静态分析？
客户端是否希望针对此应用程序执行模糊测试？
客户端是否需要针对此应用程序执行基于角色的测试？
客户端是否需要执行Web应用程序的凭证扫描？
无线网络渗透测试
有多少无线网络？
是否使用了访客无线网络？如果是这样：
访客网络是否需要身份验证？
无线网络使用什么类型的加密？
覆盖面积是多少？
是否有必要列举流氓设备？
团队是否会评估针对客户的无线攻击？
大约有多少客户将使用无线网络？
物理渗透测试
有多少地方正在评估？
这个物理位置是共享设施吗？如果是这样：
多少层楼？
哪个楼层在范围内？
是否有需要绕过的保安人员？如果是这样：
保安人员是否通过第三方使用？
他们武装了吗？
他们被允许使用武力吗？
大楼有多少个入口？
是否允许使用锁镐或碰撞键？（也考虑当地法律）
此测试的目的是验证是否符合现有政策和程序或执行审核？
该范围内的面积是多少？
是否记录了所有物理安全措施？
是否正在使用摄像机？
相机客户端拥有？如果是这样：
团队是否应该尝试访问存储摄像机数据的位置？
是否使用了武装警报系统？如果是这样：
警报器是无声警报吗？
动作是否触发警报？
门窗打开是否触发警报？
社会工程学
客户端是否有他们希望执行社交工程攻击的电子邮件地址列表？
客户端是否有他们想要执行社交工程攻击的电话号码列表？
社交工程是否被批准用于获取未经授权的物理访问？如果是这样：
将有多少人成为目标？
应该注意的是，作为不同级别的测试的一部分，可能不需要业务部门经理，系统管理员和帮助台人员的问题。但是，如果这些问题是必要的，可以在下面找到一些示例问题。

业务部门经理的问题
经理是否意识到即将进行测试？
如果暴露，损坏或删除会给组织带来最大风险的主要数据是什么？
是否有测试和验证程序来验证业务应用程序是否正常运行？
从首次开发应用程序开始，测试人员是否可以访问质量保证测试程序？
是否为应用程序数据制定了灾难恢复程序？
系统管理员的问题
有没有可以被描述为脆弱的系统？（具有崩溃倾向的系统，较旧的操作系统或未修补的系统）
网络上是否存在客户不拥有的系统，可能需要额外的批准才能进行测试？
变更管理程序是否到位？
修复系统中断的平均时间是多少？
是否有任何系统监控软件？
什么是最关键的服务器和应用程序？
是否定期测试备份？
最后一次恢复备份是什么时候？
范围蠕变
范围蔓延是使渗透测试公司破产的最有效方法之一。问题是许多公司和经理几乎不知道如何识别它，或者当它发生时如何对它作出反应。

当战斗范围蔓延时，有几件事需要记住。首先，如果客户对特定工作所做的工作感到满意，那么他们要求额外的工作是很常见的。以此作为恭维，并毫不犹豫地要求额外的资金来弥补所花费的额外时间。如果客户拒绝支付额外的工作，那么完成这项工作几乎是不值得的。

第二点更为关键。在与现有客户打交道时，请注意保持较低的价格。通过价格欺诈来利用好的情况是驱逐重复业务的可靠方法。考虑到价格可以降低，因为公司避免了获得客户的成本，例如正式的RFP流程和寻找客户本身。此外，未来工作的最佳来源是通过现有客户。善待他们，他们会回来。

指定开始日期和结束日期
击败范围蔓延的另一个关键组件是明确说明开始和结束日期。这使项目有了明确的目的。范围蠕变发生的最常见区域之一是在重新测试期间。在签订合同时，重新测试总是听起来不错。它表明公司充满关怀和勤奋，努力确保客户尽可能安全。当忘记在完成工作之前没有支付工作时，问题就开始了。这包括重新测试。

为了降低这种风险，请在合同中添加一个简单的声明，其中提到必须在最终报告交付后的特定时间范围内完成所有重新测试。然后，测试人员有责任带头重新测试。如果客户要求延期，请始终允许此条件，即在最初指定的日期完成付款。最后，最重要的是，进行质量再测试。请记住，未来工作的最佳来源是您现有的客户群。

指定IP范围和域
在开始渗透测试之前，必须确定所有目标。这些目标应在初始问卷调查阶段从客户处获得。目标可以由客户以特定IP地址，网络范围或域名的形式给出。在某些情况下，客户提供的唯一目标是组织的名称，并期望测试人员能够自己识别其余的目标。重要的是要定义在测试仪和最终目标之间的防火墙和IDS / IPS或网络设备等系统是否也是范围的一部分。应识别和定义其他元素，如上游提供商和其他第三方提供商，无论其是否在范围内。

验证范围
在开始攻击目标之前，您必须确认它们实际上是由您正在执行测试的客户所拥有的。想想如果你开始攻击一台机器并成功渗透它而后来发现该机器实际属于另一个组织（如医院或政府机构）的线路，可能会遇到的法律后果。

与第三方打交道
在许多情况下，参与将包括测试由第三方托管的服务或应用程序。随着“云”服务变得越来越流行，近年来这种情况变得越来越普遍。最重要的是要记住，虽然客户可能已经批准了许可，但他们并不代表他们的第三方提供商。因此，必须从它们获得许可才能测试托管系统。如果没有获得适当的许可，就会像往常一样带来违反法律的可能性，这可能会导致无休止的头痛。

云服务
测试云服务的最大问题是存储在一个物理介质上的来自多个不同组织的数据。通常，这些不同数据域之间的安全性非常宽松。需要向云服务提供商发出测试警报，并且需要确认测试正在进行，并授予测试组织测试权限。此外，在发现可能影响其他云客户的安全漏洞的情况下，需要在云服务提供商内存在可以联系的直接安全联系人。某些云提供商具有针对渗透测试人员遵循的特定过程，并且可能需要请求表单，日程安排或他们的明确许可才能开始测试。

ISP
与客户一起验证ISP服务条款。在许多商业情况下，ISP将有特定的测试规定。在发起攻击之前仔细阅读这些条款。在某些情况下，ISP会避开并阻止某些被视为恶意的流量。客户可能会批准此风险，但必须始终在开始之前明确沟通。虚拟主机与所有其他第三方一样，测试的范围和时间需要与网络托管服务提供商明确沟通。此外，在与客户端进行通信时，请务必清楚地表明测试只会搜索Web漏洞。该测试不会发现底层基础架构中的漏洞，这些漏洞可能仍然提供了破坏应用程序的途径。

的MSSP
托管安全服务提供商也可能需要通知测试。具体而言，他们需要在他们拥有的系统和服务进行测试时得到通知。但是，在某些情况下，MSSP不会得到通知。如果确定MSSP的实际响应时间是测试的一部分，那么通知MSSP的测试完整性当然不符合最佳利益。作为一般经验法则，每当MSSP明确拥有的设备或服务进行测试时，都需要通知他们。

服务器所在的国家/地区
验证服务器所在国家/地区也符合测试人员的最佳利益。确认国家/地区后，请在开始测试前查看特定国家/地区的法律。不应该假设公司的法律团队将为测试人员提供当地法律的完整概要。也不应假设公司将对其测试人员违反的任何法律承担法律责任。每个测试人员都有责任在他们开始测试之前验证他们正在测试的每个区域的法律，因为最终将需要回答任何违规行为的测试人员。

定义可接受的社会工程借口
许多组织都希望以与当前攻击一致的方式测试其安全状态。目前，许多攻击者广泛使用社交工程和鱼叉式网络钓鱼攻击。虽然大多数成功的攻击都使用诸如性，毒品和摇滚（色情，伟哥和免费iPod）之类的借口，但这些借口在公司环境中可能是不可接受的。在测试开始之前，请确保为测试选择的任何借口都以书面形式获得批准。

DoS测试
在参与开始之前，应该讨论压力测试或拒绝服务测试。由于测试的潜在破坏性，许多组织可能会感到不舒服。如果组织只担心其数据的机密性或完整性，则可能没有必要进行压力测试; 但是，如果组织也担心其服务的可用性，那么压力测试应该在与生产环境相同的非生产环境中进行。

付款条件
准备许多测试人员完全忘记的测试的另一个方面是如何支付他们的费用。就像合约日期一样，应该有具体的付款日期和条款。大型组织尽可能延迟付款的情况并不少见。以下是一些常见的付款方式。这些只是一些例子。绝对建议每个组织创建和调整自己的定价结构，以更恰当地满足客户和他们自己的需求。重要的是在测试开始之前应该有某种结构。

净30
总金额应在交付最终报告后30天内到期。这通常与未付款的每月百分比罚款相关联。这可以是您希望授予客户的任意天数（即45或60）。

提前一半
在测试开始之前，需要预先支付总账单的一半并不罕见。这对于长期参与非常普遍。

定期
经常性付款时间表更常用于长期约定。例如，一些约定可能会延长一年或两年。客户全年定期分期付款并不罕见。

目标
每次渗透测试都应该以目标为导向。这就是说，测试的目的是识别导致客户业务或任务目标受到损害的特定漏洞。它不是要找到未修补的系统。它是关于识别将对组织产生负面影响的风险。

主
测试的主要目标不应该是合规性。这种推理有许多不同的理由。首先，合规性不等于安全性。虽然应该理解许多组织因为合规而接受测试，但它不应该是测试的主要目标。例如，可以聘请公司完成渗透测试，作为PCI-DSS要求的一部分。

处理信用卡信息的公司并不缺乏。然而，在竞争激烈的市场中使目标组织独特和可行的特征如果受到损害将产生最大的影响。信用卡系统受到损害肯定是一个严重的问题，但信用卡号码以及泄露的所有相关客户数据将是灾难性的。

次要
次要目标与合规性直接相关。主要目标与次要目标密切相关的情况并不少见。例如，在PCI-DSS驱动测试的示例中，获取信用卡是次要目标。将违反数据的行为与组织的业务或任务驱动程序联系起来是首要目标。次要目标意味着合规性和/或IT。主要目标得到了高层管理人员的关注。

商业分析
在进行渗透测试之前，确定客户安全状况的成熟度水平是有益的。有许多组织选择直接进入渗透测试，首先评估这个成熟度级别。对于安全程序非常不成熟的客户，首先执行漏洞分析通常是个好主意。

一些测试人员认为，脆弱性分析（VA）工作存在耻辱感。那些测试人员忘记了目标是识别目标组织中的风险，而不是追求所谓的“摇滚明星”生活方式。如果一家公司还没有做好全面渗透测试的准备，他们将从良好的VA中获得远远超过渗透测试的价值。

事先与客户建立有关他们将提供的系统的信息。询问有关已记录的漏洞的信息可能也会有所帮助。通过不将测试发现与已知问题重叠，这将节省测试人员的时间并节省客户资金。同样，如果合规性并非绝对要求，则完整或部分白盒测试可能会为客户带来比黑盒测试更多的价值。

建立沟通渠道
任何渗透测试最重要的一个方面是与客户的沟通。您与客户互动的频率以及您接触客户的方式可以使他们的满意度产生巨大差异。以下是一个沟通框架，有助于让客户对测试活动感到满意。

紧急联系信息
显然，能够在紧急情况下与客户或目标组织取得联系至关重要。可能会出现紧急情况，并且必须建立联系点以便处理它们。创建紧急联系人列表。此列表应包括测试范围内所有各方的联系信息。创建后，紧急联系人列表应与列表中的所有人员共享。请记住，目标组织可能不是客户。

收集有关每个紧急联系人的以下信息：

全名
职衔和运营责任
如果尚未指定，则授权讨论测试活动的详细信息
两种形式的24/7直接联系，如手机，寻呼机或家庭电话，如果可能的话
一种形式的安全批量数据传输，例如SFTP或加密电子邮件
注意：帮助台或操作中心等组的编号可以替换一个紧急联系人，但仅限于全天候配备人员。每次渗透测试的性质会影响谁应该在紧急联系人名单上。不仅需要提供客户和目标的联系信息，还可能需要在紧急情况下联系测试人员。该列表最好包括以下人员：

参与测试组中的所有渗透测试人员
测试组的经理
每个目标组织有两个技术联系人
客户有两个技术联系人
客户的一位高层管理人员或业务联系人
上面的列表可能会有一些重叠。例如，目标组织可以是客户，测试组的经理也可以执行渗透测试，或者客户的技术联系可以在上层管理中。还建议为每个参与方定义一个联系人，由其领导并代表其负责。

事件报告流程
由于多种原因，讨论组织当前的事件响应能力在参与之前很重要。渗透测试的一部分不仅是测试组织所具有的安全性，还测试其事件响应能力。

如果完整的参与可以在目标的内部安全团队没有注意到的情况下完成，那么就会发现安全状况存在重大差距。同样重要的是要确保在测试开始之前，目标组织的某个人知道测试何时进行，以便事件响应团队在半夜不会开始呼叫高层管理人员，因为他们认为他们受到攻击或受到攻击。

事件定义
美国国家标准与技术研究院（NIST）将事件定义如下：“违反计算机安全策略，可接受的使用策略或标准安全实践的违规或迫在眉睫的威胁。”（计算机安全事件处理指南 - 特刊800- 61 Rev 1）。事件也可以在物理层面上发生，其中人通过任何手段获得对区域的未授权物理访问。目标组织应针对不同类型的事件具有不同的类别和级别。

状态报告频率
状态报告的频率可能差异很大。影响报告计划的一些因素包括测试的总长度，测试范围和目标的安全成熟度。有效的时间表使客户感到精力充沛。被忽视的客户是以前的客户。

一旦设定了状态报告的频率和时间表，就必须满足它。推迟或推迟状态报告可能是必要的，但不应成为慢性病。如有必要，可能会要求客户同意新的时间表。完全删除状态报告是不专业的，如果可能的话应该避免。

PGP和其他替代品
加密不是可选的。与客户的沟通是任何渗透测试参与的绝对必要部分，并且由于参与的敏感性，敏感信息的通信必须加密，尤其是最终报告。在测试开始之前，必须与客户建立安全通信的手段。几种常见的加密方法如下：

PGP / GPG可用于通过电子邮件进行通信并加密最终报告（请记住，主题行以明文形式传递）
托管在客户网络上的安全邮箱
电话
面对面的会议
要提供最终报告，您还可以将报告存储在AES加密存档文件中，但请确保您的存档实用程序支持使用CBC进行AES加密。
还要问哪些信息可以写入，哪些信息只能口头传达。一些组织有充分的理由限制以书面形式传递给他们的安全信息。

参与规则
虽然范围定义了将要测试的内容，但参与规则定义了测试的发生方式。这些是两个不同的方面，需要彼此独立地处理。

时间线
应该为参与制定明确的时间表。虽然范围定义了参与的开始和结束，但参与规则定义了介于两者之间的所有内容。应该理解，时间线将随着测试的进行而改变。但是，拥有严格的时间表并不是创建时间轴的目标。相反，在测试开始时制定时间表将允许每个参与者更清楚地识别要完成的工作以及将负责所述工作的人员。GANTT图表和工作分解结构通常用于定义工作以及每项特定工作所需的时间。

互联网上有许多免费的GANTT图表工具。许多经理都认同这些工具。因此，它们是与目标组织的高层管理人员进行沟通的绝佳媒介。

地点
任何给定参与的另一个参数对于提前与客户建立很重要，是测试人员在测试期间需要前往的任何目的地。这可以像识别当地酒店一样简单，也可以像确定特定目标国家的适用法律那样复杂。

组织在多个地点和地区运营并不常见，需要选择一些选定的站点进行测试。在这些情况下，应避免前往每个客户位置，而应确定是否有VPN站点连接可用于远程测试。披露敏感信息

虽然特定参与的目标之一可能是获取敏感信息，但实际上不应查看或下载某些信息。对于较新的测试人员来说，这似乎很奇怪，但是，在许多情况下，测试人员不应该拥有目标数据。例如，根据健康保险流通与责任法案（HIPAA），个人健康信息（PHI）必须保护这些数据。在某些情况下，目标系统可能没有防火墙或防病毒（AV）保护它。在这种情况下，应该绝对避免测试人员拥有任何和所有个人身份信息（PII）。

但是，如果无法物理或虚拟地获取数据，那么如何证明测试人员确实获得了对信息的访问权限？这个问题已经以多种方式解决了。有办法证明金库门是在没有任何钱的情况下打开的。例如，只要文件名本身中没有可见的PII，就可以获取数据库模式和文件权限的屏幕截图，或者可以显示文件本身而无需打开它们来显示内容。

测试人员对特定参与度的谨慎程度是一个需要与客户讨论的参数，但进行测试的公司应始终确保在法律意义上保护自己，而不管客户的意见如何。无论对敏感数据的暴露程度如何，所有报告模板和测试机都应在每次参与后进行充分清理。作为特别注意，如果测试人员发现非法数据（即儿童色情），应立即通知适当的执法官员，然后是客户。不要接受客户的指示。

证据处理
在处理测试的证据和报告的不同阶段时，非常重视对数据的极度谨慎。始终在测试之间使用加密并清理测试机器。切勿在安全会议上发布带有测试报告的USB记忆棒。无论您做什么，都不要将其他客户参与的报告重新用作模板！将引用留给文档中的其他组织是非常不专业的。

定期会议
在整个测试过程中，定期与客户会面，告知他们测试的整体进度至关重要。这些会议应每天举行，并应尽可能短。会议应该遵循三个概念：计划，进展和问题。

通常会讨论计划，以便在重大计划外更改或停机期间不进行测试。进展只是客户对目前已完成的内容的更新。本次会议还应讨论问题，但为了简洁起见，有关解决方案的对话几乎总是应该脱机。

一天的时间来测试
某些客户要求所有测试都在工作时间之外完成。对于大多数测试者来说，这可能意味着深夜。在测试开始之前，应与客户建立时间要求。

处理回避
有时候回避是完全可以接受的，有时候它可能不符合测试的精神。例如，如果您的测试是一个完整的黑盒测试，您不仅要测试技术，还要测试目标组织安全团队的功能，那么回避完全没问题。但是，当您与目标组织的安全团队协作测试大量系统时，避免攻击可能不符合测试的最佳利益。

允许测试
渗透测试需要获得的最重要文件之一是“测试许可”文档。本文档说明了范围并包含一个签名，该签名承认对测试人员活动的认识。此外，它应该明确指出测试可能导致系统不稳定，并且测试人员将给予所有应有的注意，以防止系统崩溃。但是，由于测试可能导致不稳定，因此客户不应让测试人员对任何系统不稳定或崩溃负责。至关重要的是，在客户签署本文档之前，测试不会开始。

此外，一些服务提供商在测试他们的系统之前需要提前通知和/或单独的许可。例如，亚马逊有一个必须完成的在线申请表，并且必须先批准该请求，然后再扫描其云上的任何主机。如果需要，它应该是文档的一部分。

法律考虑因素
渗透测试中常见的一些活动可能违反当地法律。因此，建议在要执行工作的位置检查常见测试任务的合法性。例如，在渗透测试过程中捕获的任何VOIP呼叫在某些区域可能被视为窃听。

能力和技术到位
良好的渗透测试不仅仅是检查未修补的系统。他们还测试目标组织的功能。为此，下面列出了您可以在测试时进行基准测试的事项。

能够检测和响应信息收集
能够检测并响应足部打印
能够检测并响应扫描和漏洞分析
能够检测并响应渗透（攻击）
能够检测和响应数据聚合
能够检测和响应数据过滤
在跟踪此信息时，请务必收集时间信息。例如，如果检测到扫描，则应通知您，并记下您当时正在执行的扫描级别。

